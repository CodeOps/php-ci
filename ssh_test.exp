#!/usr/bin/expect -f
# Expect script to test whether ssh works
# to avoid usage of sshpass
set host [lrange $argv 0 0] 
set user [lrange $argv 1 1]   
set pass [lrange $argv 2 2] 
set timeout -1   
# get remote hostname
spawn ssh $user@$host cat /etc/hostname
match_max 100000
# Enter
expect "*?assword:*"
# Send password aka $pass 
send -- "$pass\r"
expect eof